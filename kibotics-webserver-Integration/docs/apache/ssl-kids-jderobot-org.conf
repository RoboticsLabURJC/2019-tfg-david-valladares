<IfModule mod_ssl.c>
    <VirtualHost 193.147.79.196:443>
        ServerAdmin webmaster@localhost
        DocumentRoot /var/www/kids-web/jderobot_server
        ServerName kibotics.org
        # ServerAlias kibotics.org
   
        ErrorLog ${APACHE_LOG_DIR}/error.log
        CustomLog ${APACHE_LOG_DIR}/access.log combined



        ### Django configuration ###
        ############################
        ### Django statics ###
        Alias /static "/var/www/kibotics-statics"
        <Directory "/var/www/kibotics-statics">
            Allow from all
            Require all granted
        </Directory>



        ### CGI configuration ###
        <Directory /var/www/kids-web/jderobot_server/scripts/>
            AllowOverride None
            Options +ExecCGI +MultiViews +SymLinksIfOwnerMatch +Includes +Multiviews
            Order allow,deny
            Allow from all
            AddHandler cgi-script .py
            AddHandler cgi-script .cgi
            AddHandler wsgi-script .wsgi
        </Directory>


        ### ipynb_checkpoints ###
        Alias /apache-users/ "/var/www/kids-web/jderobot_server/users/"
        <Directory /var/www/kids-web/jderobot_server/users/>
           #Allow from all
           Require all granted
        </Directory>


        ### Path to WSGI in Django project ###
        <Directory /var/www/kids-web/jderobot_server/jderobot_server>
            <Files wsgi.py>
                #Order allow,deny
                #Allow from all
                Require all granted
            </Files>
        </Directory>


        WSGIDaemonProcess jderobot_server python-path=/var/www/kids-web:/home/jderobot/.virtualenvs/kids-venv/lib/python2.7/site-packages
        #WSGIApplicationGroup %{GLOBAL}
        WSGIProcessGroup jderobot_server
        WSGIScriptAlias / /var/www/kids-web/jderobot_server/jderobot_server/wsgi.py


        ### Websocket ###
        ProxyRequests Off
        ProxyPass        "/_ws_/" "ws://127.0.0.1:8000/"
        ProxyPassReverse "/_ws_/" "ws://127.0.0.1:8000/"


        ### SSL ###
        SSLEngine on
        #SSLCertificateFile      /etc/ssl/certs/apache-selfsigned.crt
        #SSLCertificateKeyFile   /etc/ssl/private/apache-selfsigned.key
        SSLCertificateFile       /etc/letsencrypt/live/kibotics.org/fullchain.pem
        SSLCertificateKeyFile    /etc/letsencrypt/live/kibotics.org/privkey.pem
        #Include /etc/letsencrypt/options-ssl-apache.conf

        #   SSL Engine Options:
        <FilesMatch "\.(cgi|shtml|phtml|php)$">
                SSLOptions +StdEnvVars
        </FilesMatch>
        <Directory /usr/lib/cgi-bin>
            SSLOptions +StdEnvVars
        </Directory>

    </VirtualHost>
</IfModule>

